{
    "name": "Flo",
    "scopeName": "source.flo",
    "patterns": [
        {
            "include": "#comment"
        },
        {
            "include": "#constant"
        },
        {
            "include": "#entity"
        },
        {
            "include": "#invalid"
        },
        {
            "include": "#keyword"
        },
        {
            "include": "#meta"
        },
        {
            "include": "#operator"
        },
        {
            "include": "#punctuation"
        },
        {
            "include": "#storage"
        },
        {
            "include": "#string"
        },
        {
            "include": "#support"
        },
        {
            "include": "#type"
        },
        {
            "include": "#variable"
        }
    ],
    "repository": {
        "string_escaped_char": {
            "patterns": [
                {
                    "match": "\\\\([0-7]{3}|[abfnrtv\\\\'\"]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})",
                    "name": "constant.character.escape.flo"
                },
                {
                    "match": "\\\\[^0-7xuUabfnrtv\\'\"]",
                    "name": "invalid.illegal.unknown-escape.flo"
                }
            ]
        },
        "string_placeholder": {
            "patterns": [
                {
                    "match": "%(\\[\\d+\\])?([\\+#\\-0\\x20]{,2}((\\d+|\\*)?(\\.?(\\d+|\\*|(\\[\\d+\\])\\*?)?(\\[\\d+\\])?)?))?[vT%tbcdoqxXUbeEfFgGsp]",
                    "name": "constant.other.placeholder.flo"
                }
            ]
        },
        "imports": {
            "patterns": [
                {
                    "match": "((?!\\s+\")[^\\s]*)?\\s*((\")([^\"]*)(\"))",
                    "captures": {
                        "1": {
                            "name": "entity.alias.import.flo"
                        },
                        "2": {
                            "name": "string.quoted.double.flo"
                        },
                        "3": {
                            "name": "punctuation.definition.string.begin.flo"
                        },
                        "4": {
                            "name": "entity.name.import.flo"
                        },
                        "5": {
                            "name": "punctuation.definition.string.end.flo"
                        }
                    }
                },
                {
                    "begin": "\\(",
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.definition.imports.begin.bracket.round.flo"
                        }
                    },
                    "end": "\\)",
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.imports.end.bracket.round.flo"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#comment"
                        },
                        {
                            "include": "#imports"
                        }
                    ]
                }
            ]
        },
        "comment": {
            "patterns": [
                {
                    "begin": "/\\*",
                    "end": "\\*/",
                    "captures": {
                        "0": {
                            "name": "punctuation.definition.comment.flo"
                        }
                    },
                    "name": "comment.block.flo"
                },
                {
                    "begin": "//",
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.definition.comment.flo"
                        }
                    },
                    "end": "$",
                    "name": "comment.line.double-slash.flo"
                }
            ]
        },
        "constant": {
            "patterns": [
                {
                    "comment": "Floating-point literals",
                    "match": "(\\.\\d+([Ee][-+]\\d+)?i?)\\b|\\b\\d+\\.\\d*(([Ee][-+]\\d+)?i?\\b)?",
                    "name": "constant.numeric.floating-point.flo"
                },
                {
                    "comment": "Integers",
                    "match": "\\b((0x[0-9a-fA-F]+)|(0[0-7]+i?)|(\\d+([Ee]\\d+)?i?)|(\\d+[Ee][-+]\\d+i?))\\b",
                    "name": "constant.numeric.integer.flo"
                },
                {
                    "comment": "Language constants",
                    "match": "\\b(true|false|nil|iota)\\b",
                    "name": "constant.language.flo"
                }
            ]
        },
        "entity": {
            "patterns": [
                {
                    "match": "^(\\bfunc\\b)\\s(\\w+)?\\(([a-z]+)\\s(\\*)?([a-zA-Z]+)\\)",
                    "captures": {
                        "1": {
                            "name": "keyword.function.flo"
                        },
                        "2": {
                            "name": "entity.name.function.flo"
                        },
                        "3": {
                            "name": "variable.other.receiver.flo"
                        },
                        "4": {
                            "name": "keyword.operator.address.flo"
                        },
                        "5": {
                            "name": "entity.name.type.receiver.flo"
                        }
                    }
                },
                {
                    "match": "(\\*)\\w+(\\.)(\\w+)",
                    "captures": {
                        "1": {
                            "name": "keyword.operator.address.flo"
                        },
                        "2": {
                            "name": "punctuation.other.period.flo"
                        },
                        "3": {
                            "name": "entity.name.type.flo"
                        }
                    }
                },
                {
                    "comment": "Function Definitions",
                    "begin": "^(\\bfunc\\b)\\s(\\w+)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.function.flo"
                        },
                        "2": {
                            "name": "entity.name.function.flo"
                        }
                    },
                    "end": "\\{",
                    "patterns": [
                        {
                            "match": "(\\*)\\w+(\\.)(\\w+)",
                            "captures": {
                                "1": {
                                    "name": "keyword.operator.address.flo"
                                },
                                "2": {
                                    "name": "punctuation.other.period.flo"
                                },
                                "3": {
                                    "name": "entity.name.type.flo"
                                }
                            }
                        },
                        {
                            "include": "$self"
                        }
                    ]
                },
                {
                    "comment": "Function declarations",
                    "match": "^(\\bfunc\\b)(?:\\s+(\\([^\\)]+\\)\\s+)?(\\w+)(?=\\())?",
                    "captures": {
                        "1": {
                            "name": "keyword.function.flo"
                        },
                        "2": {
                            "patterns": [
                                {
                                    "include": "#brackets"
                                },
                                {
                                    "include": "#operators"
                                },
                                {
                                    "include": "#variable"
                                }
                            ]
                        },
                        "3": {
                            "patterns": [
                                {
                                    "match": "\\d\\w*",
                                    "name": "invalid.illegal.identifier.flo"
                                },
                                {
                                    "match": "\\w+",
                                    "name": "entity.name.function.flo"
                                }
                            ]
                        }
                    }
                },
                {
                    "comment": "Functions",
                    "match": "(\\bfunc\\b)|(\\w+)(?=\\()",
                    "captures": {
                        "1": {
                            "name": "keyword.function.flo"
                        },
                        "2": {
                            "patterns": [
                                {
                                    "match": "\\d\\w*",
                                    "name": "invalid.illegal.identifier.flo"
                                },
                                {
                                    "match": "\\w+",
                                    "name": "support.function.flo"
                                }
                            ]
                        }
                    }
                },
                {
                    "begin": "\\b(package)\\s+",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.package.flo"
                        }
                    },
                    "end": "(?!\\G)",
                    "patterns": [
                        {
                            "match": "\\d\\w*",
                            "name": "invalid.illegal.identifier.flo"
                        },
                        {
                            "match": "\\w+",
                            "name": "entity.name.package.flo"
                        }
                    ]
                },
                {
                    "begin": "\\b(type)\\s+",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.type.flo"
                        }
                    },
                    "end": "(?!\\G)",
                    "patterns": [
                        {
                            "match": "\\d\\w*",
                            "name": "invalid.illegal.identifier.flo"
                        },
                        {
                            "match": "\\w+",
                            "name": "entity.name.type.flo"
                        }
                    ]
                },
                {
                    "match": "(?!interface|struct)(?>\\w+)(?=\\{)",
                    "name": "entity.name.type.struct.flo"
                },
                {
                    "match": "(?<=\\[\\])(?>\\w+)",
                    "name": "entity.name.type.flo"
                },
                {
                    "match": "(chan)\\s(\\*)(?>\\w+)",
                    "name": "entity.name.type.flo",
                    "captures": {
                        "1": {
                            "name": "keyword.channel.flo"
                        },
                        "2": {
                            "name": "keyword.operator.pointer.flo"
                        },
                        "3": {
                            "name": "entity.name.type.channel.flo"
                        }
                    }
                }
            ]
        },
        "invalid": {
            "patterns": []
        },
        "keyword": {
            "patterns": [
                {
                    "comment": "Flow control keywords",
                    "match": "\\b(and|or|break|case|continue|default|defer|else|elif|fallthrough|for|go|goto|if|range|return|select|switch)\\b",
                    "name": "keyword.control.flo"
                },
                {
                    "match": "\\bprint\\b",
                    "name": "keyword.print.flo"
                },
                {
                    "match": "\\bchan\\b",
                    "name": "keyword.channel.flo"
                },
                {
                    "match": "\\bconst\\b",
                    "name": "keyword.const.flo"
                },
                {
                    "match": "\\bfunc\\b",
                    "name": "keyword.function.flo"
                },
                {
                    "match": "\\binterface\\b",
                    "name": "keyword.interface.flo"
                },
                {
                    "match": "\\bmap\\b",
                    "name": "keyword.map.flo"
                },
                {
                    "match": "\\bstruct\\b",
                    "name": "keyword.struct.flo"
                },
                {
                    "begin": "\\b(import)\\s+",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.import.flo"
                        }
                    },
                    "end": "(?!\\G)",
                    "patterns": [
                        {
                            "include": "#imports"
                        }
                    ]
                }
            ]
        },
        "meta": {
            "patterns": [
                {
                    "name": "meta.section.struct.flo",
                    "begin": "\\s(struct)\\s(\\{)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.struct.flo"
                        },
                        "2": {
                            "name": "punctuation.definition.struct.flo"
                        }
                    },
                    "end": "\\}",
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.struct.flo"
                        }
                    },
                    "patterns": [
                        {
                            "match": "^\\s+\\w+\\s+?(?=\\/|$)",
                            "name": "entity.name.type.anonymous-field.flo"
                        },
                        {
                            "match": "(?:^\\s+)(\\w+)\\s+(\\w+)\\s+?(?=\\/|$)",
                            "captures": {
                                "1": {
                                    "name": "variable.other.field.flo"
                                },
                                "2": {
                                    "name": "entity.name.type.flo"
                                }
                            }
                        },
                        {
                            "include": "$self"
                        }
                    ]
                },
                {
                    "begin": "\\[",
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.definition.begin.bracket.square.flo"
                        }
                    },
                    "end": "\\]",
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.end.bracket.square.flo"
                        }
                    },
                    "name": "meta.section.range.flo",
                    "patterns": [
                        {
                            "name": "keyword.operator.slice.flo",
                            "match": "\\:"
                        },
                        {
                            "include": "$self"
                        }
                    ]
                }
            ]
        },
        "operator": {
            "comment": "Note that the order here is very important!",
            "patterns": [
                {
                    "match": "(&)(?=\\w)",
                    "name": "keyword.operator.pointer.flo"
                },
                {
                    "match": "(?<=\\s|\\()(\\*)(?=\\w)",
                    "name": "keyword.operator.pointer.flo"
                },
                {
                    "match": "<\\-",
                    "name": "keyword.operator.channel.flo"
                },
                {
                    "match": "\\-\\-",
                    "name": "keyword.operator.decrement.flo"
                },
                {
                    "match": "\\+\\+",
                    "name": "keyword.operator.increment.flo"
                },
                {
                    "match": "(==|!=|<=|>=|<(?!<)|>(?!>))",
                    "name": "keyword.operator.comparison.flo"
                },
                {
                    "match": "(&&|\\|\\||!)",
                    "name": "keyword.operator.logical.flo"
                },
                {
                    "match": "(=|\\+=|\\-=|\\|=|\\^=|\\*=|/=|:=|%=|<<=|>>=|&\\^=|&=)",
                    "name": "keyword.operator.assignment.flo"
                },
                {
                    "match": "(\\+|\\-|\\*|/|%)",
                    "name": "keyword.operator.arithmetic.flo"
                },
                {
                    "match": "(\\||\\^|&\\^|<<|>>)",
                    "name": "keyword.operator.arithmetic.bitwise.flo"
                },
                {
                    "match": "\\.\\.\\.",
                    "name": "keyword.operator.ellipsis.flo"
                }
            ]
        },
        "punctuation": {
            "patterns": [
                {
                    "match": ";",
                    "name": "punctuation.terminator.flo"
                },
                {
                    "match": ",",
                    "name": "punctuation.other.comma.flo"
                },
                {
                    "match": "\\.(?!\\.\\.)",
                    "name": "punctuation.other.period.flo"
                },
                {
                    "match": ":(?!=)",
                    "name": "punctuation.other.colon.flo"
                },
                {
                    "begin": "{",
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.definition.begin.bracket.curly.flo"
                        }
                    },
                    "end": "}",
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.end.bracket.curly.flo"
                        }
                    },
                    "patterns": [
                        {
                            "include": "$self"
                        }
                    ]
                }
            ]
        },
        "storage": {
            "patterns": [
                {
                    "match": "\\bbool\\b",
                    "name": "storage.type.boolean.flo"
                },
                {
                    "match": "\\bbyte\\b",
                    "name": "storage.type.byte.flo"
                },
                {
                    "match": "\\berror\\b",
                    "name": "storage.type.error.flo"
                },
                {
                    "match": "\\b(complex(64|128)|float(32|64)|u?int(8|16|32|64)?)\\b",
                    "name": "storage.type.numeric.flo"
                },
                {
                    "match": "\\brune\\b",
                    "name": "storage.type.rune.flo"
                },
                {
                    "match": "\\bstring\\b",
                    "name": "storage.type.string.flo"
                },
                {
                    "match": "\\buintptr\\b",
                    "name": "storage.type.uintptr.flo"
                }
            ]
        },
        "string": {
            "patterns": [
                {
                    "comment": "Interpreted string literals",
                    "begin": "'",
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.begin.flo"
                        }
                    },
                    "end": "'",
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.end.flo"
                        }
                    },
                    "name": "string.quoted.double.flo",
                    "patterns": [
                        {
                            "include": "#string_escaped_char"
                        },
                        {
                            "include": "#string_placeholder"
                        },
                        {
                            "include": "source.flotemplate"
                        }
                    ]
                },
                {
                    "comment": "Raw string literals",
                    "begin": "`",
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.begin.flo"
                        }
                    },
                    "end": "`",
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.end.flo"
                        }
                    },
                    "name": "string.quoted.raw.flo",
                    "patterns": [
                        {
                            "include": "#string_placeholder"
                        },
                        {
                            "include": "source.flotemplate"
                        }
                    ]
                },
                {
                    "begin": "'",
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.begin.flo"
                        }
                    },
                    "end": "'",
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.string.end.flo"
                        }
                    },
                    "name": "string.quoted.rune.flo",
                    "patterns": [
                        {
                            "match": "\\G(\\\\([0-7]{3}|[abfnrtv\\\\'\"]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})|.)(?=')",
                            "name": "constant.other.rune.flo"
                        },
                        {
                            "match": "[^']+",
                            "name": "invalid.illegal.unknown-rune.flo"
                        }
                    ]
                }
            ]
        },
        "support": {
            "patterns": [
                {
                    "comment": "Built-in functions",
                    "match": "\\b(append|cap|close|complex|copy|delete|imag|len|make|new|panic|print|println|real|recover)\\b(?=\\()",
                    "name": "support.function.builtin.flo"
                }
            ]
        },
        "type": {
            "patterns": []
        },
        "variable": {
            "patterns": [
                {
                    "match": "\\b(var)\\s+(\\w+)\\s+(?:\\[\\])?(?:\\w+(\\.))+?(\\w+)",
                    "captures": {
                        "1": {
                            "name": "keyword.var.flo"
                        },
                        "2": {
                            "name": "variable.other.declaration.flo"
                        },
                        "3": {
                            "name": "punctuation.other.period.flo"
                        },
                        "4": {
                            "name": "entity.name.type.flo"
                        }
                    }
                },
                {
                    "match": "\\b(var)\\s+(\\w+)\\s+(?:\\[\\])?(?!map)(\\w+)",
                    "captures": {
                        "1": {
                            "name": "keyword.var.flo"
                        },
                        "2": {
                            "name": "variable.other.declaration.flo"
                        },
                        "3": {
                            "name": "entity.name.type.flo"
                        }
                    }
                },
                {
                    "match": "\\b(var)\\s+(\\w+)\\s+(\\=)",
                    "captures": {
                        "1": {
                            "name": "keyword.var.flo"
                        },
                        "2": {
                            "name": "variable.other.declaration.flo"
                        },
                        "3": {
                            "name": "keyword.operator.assignment.flo"
                        }
                    }
                },
                {
                    "match": "\\b(?>[a-zA-Z](?:\\w+)?)\\b(?=\\[)",
                    "name": "variable.other.accessor.flo"
                },
                {
                    "match": "\\b(var)\\b",
                    "name": "keyword.var.flo"
                },
                {
                    "match": "_",
                    "name": "variable.other.blank.flo"
                },
                {
                    "match": "\\w+(?=\\s\\:\\=)",
                    "name": "variable.other.assignment.flo"
                },
                {
                    "match": "(?<=\\*)\\w+",
                    "name": "variable.other.pointer.flo"
                },
                {
                    "match": "(?<=\\&)(?>\\w+)",
                    "name": "variable.other.address.flo"
                },
                {
                    "match": "(?>\\w+)(?=\\s?<-)",
                    "name": "variable.other.channel.flo"
                },
                {
                    "comment": "increment",
                    "match": "(?>\\w+)(?=\\+\\+)",
                    "name": "variable.other.flo"
                },
                {
                    "comment": "decrement",
                    "match": "(?>\\w+)(?=\\-\\-)",
                    "name": "variable.other.flo"
                },
                {
                    "match": "(\\w+)(,)\\s(\\w+)\\s(\\:\\=)",
                    "captures": {
                        "1": {
                            "name": "variable.other.assignment.flo"
                        },
                        "2": {
                            "name": "punctuation.other.comma.flo"
                        },
                        "3": {
                            "name": "variable.other.assignment.flo"
                        },
                        "4": {
                            "name": "keyword.operator.assignment.flo"
                        }
                    }
                },
                {
                    "begin": "(?<=\\w)\\(",
                    "end": "\\)|$",
                    "patterns": [
                        {
                            "include": "$self"
                        },
                        {
                            "match": "(?<!\\[)\\b(?>[a-zA-Z](?:\\w+)?)\\b(?!\\]|\\.)",
                            "name": "variable.other.arg.flo"
                        }
                    ]
                },
                {
                    "match": "(?<!var)\\s*(\\w+(?:\\.\\w+)*(?>,\\s*\\w+(?:\\.\\w+)*)*)(?=\\s*=(?!=))",
                    "captures": {
                        "1": {
                            "patterns": [
                                {
                                    "match": "\\d\\w*",
                                    "name": "invalid.illegal.identifier.flo"
                                },
                                {
                                    "match": "_",
                                    "name": "variable.other.blank.flo"
                                },
                                {
                                    "match": "\\w+(?:\\.\\w+)*",
                                    "name": "variable.other.assignment.flo",
                                    "captures": {
                                        "0": {
                                            "patterns": [
                                                {
                                                    "include": "#punctuation"
                                                }
                                            ]
                                        }
                                    }
                                },
                                {
                                    "include": "#punctuation"
                                }
                            ]
                        }
                    }
                },
                {
                    "comment": "Struct fields",
                    "match": "(\\w+(?:,\\s*\\w+)*)(\\s+\\*?\\w+(?:\\.\\w+)?\\s*)?(?=\\s*=)",
                    "captures": {
                        "1": {
                            "patterns": [
                                {
                                    "match": "\\d\\w*",
                                    "name": "invalid.illegal.identifier.flo"
                                },
                                {
                                    "match": "\\w+",
                                    "name": "variable.other.assignment.flo"
                                },
                                {
                                    "include": "#punctuation"
                                }
                            ]
                        },
                        "2": {
                            "patterns": [
                                {
                                    "include": "$self"
                                }
                            ]
                        }
                    }
                },
                {
                    "match": "(\\w+(?:,\\s*\\w+)*)(\\s+(\\[(\\d*|\\.\\.\\.)\\])*\\*?(<-)?\\w+(?:\\.\\w+)?\\s*[^=].*)",
                    "captures": {
                        "1": {
                            "patterns": [
                                {
                                    "match": "\\d\\w*",
                                    "name": "invalid.illegal.identifier.flo"
                                },
                                {
                                    "match": "(?<=\\.)(\\w+)",
                                    "name": "entity.name.type.flo"
                                },
                                {
                                    "match": "\\w+",
                                    "name": "variable.other.declaration.flo"
                                },
                                {
                                    "include": "#punctuation"
                                }
                            ]
                        },
                        "2": {
                            "patterns": [
                                {
                                    "include": "$self"
                                }
                            ]
                        }
                    }
                },
                {
                    "begin": "\\b(var)\\s+",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.var.flo"
                        }
                    },
                    "end": "(?!\\G)",
                    "patterns": [
                        {
                            "include": "$self"
                        }
                    ]
                }
            ]
        }
    }
}